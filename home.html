<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Journey Tracker - Home</title>
<link rel="stylesheet" href="style.css" />
</head>
<body>

<nav class="navbar">
  <div class="logo">Journey Tracker</div>
  <ul class="nav-links">
    <li><a href="home.html" class="active">Home</a></li>
    <li><a href="index.html">Record Journey</a></li>
    <li><a href="shop.html">Shop</a></li>
  </ul>
</nav>

<header>
  <div class="header-content">
    <h1>Welcome Back!</h1>
    <p>View your total score and manage your garden.</p>
  </div>
</header>

<main style="width:90%; max-width:1000px; margin-top:30px;">
  <div class="inventory-card">
    <h2>Total Score: <span id="totalScore">0</span></h2>
    <div id="inventory">
      <h3>Your Seeds</h3>
      <ul>
        <li>Sunflower: <span class="count">0</span> <button class="plant" data-seed="sunflower">Plant</button></li>
        <li>Basil: <span class="count">0</span> <button class="plant" data-seed="basil">Plant</button></li>
        <li>Olive: <span class="count">0</span> <button class="plant" data-seed="olive">Plant</button></li>
      </ul>
    </div>
    <div id="garden">
      <h3>Garden</h3>
      <div id="plantedSeeds"></div>
    </div>
  </div>
</main>

<script>
function getInventory(){ return JSON.parse(localStorage.getItem('inventory')||'{}'); }
function getTotalScore(){ return parseFloat(localStorage.getItem('totalScore'))||0; }
function setInventory(inv){ localStorage.setItem('inventory', JSON.stringify(inv)); }
function setTotalScore(val){ localStorage.setItem('totalScore', val.toFixed(2)); }

function updateInventoryUI(){
  const inv = getInventory();
  document.querySelectorAll('#inventory li').forEach(li=>{
    const seed = li.querySelector('.plant').dataset.seed;
    const qty = inv[seed]||0;
    li.querySelector('.count').textContent = qty;
    li.querySelector('.plant').disabled = qty<=0;
  });
  document.getElementById('totalScore').textContent = getTotalScore().toFixed(2);
}

function plantSeed(seedName){
  const inv = getInventory();
  if((inv[seedName]||0)<=0) return;
  inv[seedName]-=1;
  setInventory(inv);

  const div = document.createElement('div');
  div.textContent = seedName;
  div.className = 'planted-seed';
  document.getElementById('plantedSeeds').appendChild(div);

  updateInventoryUI();
}

document.querySelectorAll('#inventory .plant').forEach(btn=>{
  btn.addEventListener('click',()=>plantSeed(btn.dataset.seed));
});

// Initialize garden and inventory
updateInventoryUI();
</script>

</body>
</html>
